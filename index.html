<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8"/>
    <title>P5 by: Daisha B. / Courtney R.</title>
  </head>

   <body>
    <svg width="5000" height="5000" font-family="sans-serif" font-size="10" text-anchor="middle"></svg>
    <script type="text/javascript" src="d3.js"></script>
    <!-- <script src="https://d3js.org/d3.v4.min.js"></script> -->
<!--    <div id="wrapper">
	  <div id="p5Map"></div>
    <div id="drawArea"></div>
   </div> -->
  <script>
  // SPACE
    var svg = d3.select("svg"),
    width = +svg.attr("width"),
    height = +svg.attr("height");

  // TITLE
    svg.append("text")
    .attr("x", 50)
    .attr("y", 0 )
    .attr("dy", "3.5em" )
    .attr("text-anchor", "start")
    .style("font-size", "28px")
    .style("font-weight", "bold")
    .text("Actors and Their Co-Stars ")

/*  function tooltip(
  id,
  w,
  h,
  title,
  text1 = "",
  text2 = "",
  value1 = "",
  value2 = ""
) {
  const cursor = d3.mouse(d3.select("svg").node());
  d3.selectAll(".tooltip").remove();
  const tooltip = d3
    .select("g#tooltip")
    .append("g")
    .classed("tooltip", true)
    .attr("id", id);

  const rect = tooltip
    .append("rect")
    .classed("background", true)
    .attr("x", 0)
    .attr("y", 0)
    .style("filter", "url(#drop-shadow)");

// two key/values max rn
  const text = tooltip
    .append("text")
    .classed("text", true)
    .attr("x", 0)
    .attr("y", 0);

  function appendTspan(t, c, x, dy, text) {
    if (text !== "")
      t.append("tspan")
        .classed(c, true) //if labeled then open box
        .attr("x", x)
        .attr("dy", dy)
        .text(text);
  }

  appendTspan(text, "title", 5, "1em", title);
  appendTspan(text, "detail", 5, "1.2em", text1);
  appendTspan(text, "detail", "4.5em", 0, value1);
  appendTspan(text, "detail", 5, "1em", text2);
  appendTspan(text, "detail", "4.5em", 0, value2);

  // Position 
  const bbox = text.node().getBBox();
  rect
    .attr("width", bbox.width + 10)
    .attr("height", bbox.height + 11)
    .attr("y", -4);

  // Manage the bottom and right edges 
  let x = cursor[0];
  let y = cursor[1] + 26;
  if (x + bbox.width + 8 + 2 > w) x = x - bbox.width - 10;
  if (y + bbox.height + 26 + 2 > h) y = y - bbox.height - 10 - 26;
  tooltip.attr("transform", `translate(${x},${y})`);
} */


  // PLACEMENT OF ALL ACTORS//////////////////////////
var data = {};
var posX = [903, 972, 681, 216, 1000, 740, 248, 288, 226, 787, 491, 394, 698, 508, 109, 277, 469, 246, 664, 582, 666, 498, 275, 113, 328, 694, 112, 750, 512, 588, 415, 500, 674, 4, 151, 19, 912, 734, 804, 453, 613, 892, 870, 833, 893, 65, 978, 285, 9, 627, 361, 11, 263, 457, 642, 144, 244, 254, 376, 761, 518, 686, 961, 352, 489, 737, 631, 129, 31, 529, 237, 377, 355, 266, 211, 986, 723, 586, 966, 617, 259, 621, 478, 758, 999, 820, 221, 423, 540, 902, 490, 429, 405, 741, 210, 400, 185, 913, 603, 386, 247, 906, 958, 769, 399, 639, 513, 524, 305, 291, 294, 571, 53, 486, 555, 86, 110, 430, 894, 868, 432, 638, 676, 650, 584, 214, 780, 281, 383, 897, 331, 350, 827, 822, 625, 269, 657, 22, 323, 690, 477, 969, 479, 634, 338, 241, 783, 59, 527, 101, 954, 696, 616, 287, 842, 985, 658, 807, 412, 995, 933, 70, 577, 752, 8, 89, 128, 667, 881, 227, 470, 742, 18, 495, 79, 511, 10, 25, 93, 69, 57, 299, 869, 496, 598, 724, 295, 888, 64, 166, 528, 876, 35, 80, 396, 134, 167, 955, 146, 569, 751, 7, 593, 393, 442, 851, 713, 71, 485, 859, 279, 879, 895, 201, 547, 853, 233, 78, 861, 997, 837, 844, 143, 521, 695, 449, 141, 549, 250, 127, 190, 106, 809, 648, 204, 125, 813, 987, 580, 272, 980, 668, 157, 917, 553, 225, 420, 840, 160, 898, 164, 949, 332, 444, 745, 348, 261, 935, 904, 928, 170, 836, 482, 746, 702, 652, 419, 919, 834, 156, 531, 990, 731, 551, 946, 414, 739, 260, 262, 519, 951, 772, 716, 708, 116, 503, 402, 105, 245, 356, 219, 391, 797, 703, 390, 863, 880, 626, 493, 427, 973, 271, 556, 620, 590, 307, 812, 691, 871, 90, 534, 213, 224, 948, 384, 315, 131, 468, 526, 452, 416, 298, 552, 212, 117, 587, 334, 756, 661, 575, 303, 398, 875, 984, 88, 149, 828, 773, 533, 497, 389, 725, 532, 964, 545, 354, 515, 480, 81, 27, 202, 5, 727, 458, 641, 439, 73, 47, 535, 340, 611, 721, 182, 180, 856, 605, 83, 49, 407, 153, 456, 177, 835, 215, 637, 947, 810, 460, 417, 336, 801, 965, 568, 865, 218, 32, 609, 749, 404, 91, 448, 700, 46, 550, 854, 915, 800, 825, 914, 95, 925, 563, 492, 766, 370, 345, 916, 558, 372, 775, 506, 20, 467, 217, 671, 186, 960, 581, 324, 52, 45, 152, 360, 203, 410, 61, 135, 570, 907, 38, 344, 192, 890, 768, 197, 623, 209, 604, 67, 507, 276, 438, 108, 461, 785, 771, 51, 48, 133, 600, 267, 722, 502, 922, 677, 930, 896, 606, 56, 382, 316, 501, 68, 54, 706, 378, 463, 651, 649, 66, 278, 630, 459, 806, 770, 943, 437, 44, 754, 619, 561, 991, 282, 653, 537, 37, 369, 719, 327, 753, 675, 747, 87, 98, 901, 433, 956, 597, 940, 939, 84, 280, 184, 341, 199, 159, 589, 242, 325, 362, 147, 832, 445, 788, 937, 855, 313, 130, 306, 824, 860, 717, 921, 794, 886, 312, 258, 231, 884, 908, 335, 200, 235, 730, 607, 680, 692, 821, 900, 28, 333, 911, 139, 781, 576, 29, 975, 565, 220, 688, 720, 988, 434, 566, 318, 647, 945, 174, 173, 624, 94, 148, 992, 136, 738, 487, 40, 290, 310, 75, 682, 622, 595, 230, 874, 41, 931, 26, 191, 484, 169, 292, 927, 171, 654, 847, 663, 887, 857, 122, 161, 564, 530, 873, 365, 175, 591, 618, 358, 168];
var posY = [212, 541, 400, 886, 961, 24, 191, 256, 808, 463, 513, 715, 261, 1000, 461, 303, 2, 508, 942, 876, 825, 719, 116, 776, 775, 177, 294, 165, 247, 561, 70, 414, 601, 801, 176, 652, 359, 948, 76, 989, 244, 486, 647, 643, 617, 351, 788, 99, 296, 730, 518, 106, 113, 713, 469, 891, 562, 991, 150, 957, 952, 370, 407, 45, 168, 945, 426, 500, 711, 198, 377, 863, 494, 12, 143, 229, 326, 311, 587, 221, 641, 982, 795, 31, 549, 784, 960, 658, 425, 533, 613, 848, 4, 332, 710, 7, 195, 809, 187, 67, 552, 574, 181, 272, 998, 144, 653, 999, 985, 180, 174, 860, 197, 416, 584, 488, 373, 253, 636, 258, 238, 337, 853, 455, 154, 280, 507, 631, 153, 727, 97, 501, 583, 973, 200, 42, 865, 473, 499, 758, 662, 341, 565, 993, 628, 676, 878, 339, 56, 502, 669, 184, 646, 907, 60, 553, 498, 589, 55, 93, 44, 627, 899, 941, 695, 509, 742, 435, 9, 761, 364, 149, 947, 949, 58, 101, 782, 300, 919, 585, 285, 234, 734, 804, 871, 608, 62, 697, 545, 634, 799, 893, 90, 681, 693, 626, 735, 915, 721, 940, 824, 839, 477, 387, 917, 335, 49, 278, 325, 292, 156, 357, 901, 222, 645, 136, 84, 449, 127, 747, 289, 320, 939, 542, 883, 302, 92, 117, 700, 856, 393, 140, 284, 768, 787, 777, 405, 147, 635, 374, 925, 354, 342, 226, 766, 671, 402, 778, 236, 241, 35, 680, 389, 266, 404, 424, 763, 155, 733, 885, 975, 607, 530, 765, 38, 504, 220, 588, 604, 854, 580, 263, 394, 152, 696, 146, 510, 579, 570, 223, 61, 672, 182, 723, 896, 675, 490, 360, 192, 228, 188, 316, 438, 536, 270, 492, 750, 663, 94, 981, 810, 129, 293, 46, 418, 309, 363, 480, 667, 403, 900, 295, 137, 560, 980, 15, 179, 439, 618, 967, 108, 57, 133, 5, 213, 313, 51, 175, 98, 767, 19, 110, 612, 493, 843, 744, 994, 82, 484, 903, 685, 39, 986, 571, 904, 581, 796, 430, 196, 889, 445, 834, 972, 369, 938, 606, 134, 125, 186, 173, 423, 707, 379, 873, 304, 846, 520, 769, 355, 521, 563, 68, 887, 259, 382, 66, 714, 8, 535, 466, 665, 849, 170, 924, 329, 471, 343, 390, 3, 162, 470, 216, 689, 161, 523, 478, 126, 356, 124, 983, 812, 515, 111, 257, 413, 227, 128, 739, 458, 962, 923, 898, 794, 704, 446, 164, 109, 350, 831, 988, 753, 102, 21, 398, 53, 417, 534, 447, 47, 578, 738, 688, 591, 282, 408, 816, 399, 958, 141, 209, 273, 746, 762, 456, 73, 310, 139, 933, 383, 772, 807, 611, 40, 557, 358, 779, 577, 918, 797, 717, 283, 347, 800, 452, 52, 656, 687, 818, 703, 142, 532, 997, 269, 421, 954, 305, 28, 497, 288, 214, 37, 318, 171, 657, 823, 71, 224, 664, 75, 429, 888, 547, 233, 246, 254, 595, 353, 951, 930, 194, 290, 624, 821, 160, 692, 503, 344, 43, 699, 517, 210, 151, 172, 791, 572, 178, 661, 519, 916, 203, 935, 780, 17, 315, 230, 122, 638, 281, 749, 928, 251, 841, 720, 333, 264, 566, 190, 990, 59, 686, 420, 362, 27, 550, 678, 806, 651, 648, 838, 793, 276, 548, 921, 619, 731, 683, 629, 487, 433, 372, 419, 644, 610, 464, 543, 792, 324, 204, 605, 670, 829, 1, 454, 69, 702, 756, 937, 163, 803, 682, 741, 88, 207, 614, 158, 760, 331, 441, 349, 771, 840, 609, 538, 77, 334, 525, 340, 262, 225, 85];
// var pos = [
// {
//     "x": 126,
//     "y": 83
//     },
//     {
//     "x": 27,
//     "y": 46
//     },
//     {
//     "x": 117,
//     "y": 64
//     },
//     {
//     "x": 70,
//     "y": 138
//     },
//     {
//     "x": 91,
//     "y": 21
//     },
//     {
//     "x": 45,
//     "y": 25
//     },
//     {
//     "x": 9,
//     "y": 140
//     },
//     {
//     "x": 158,
//     "y": 188
//     },
//     {
//     "x": 99,
//     "y": 108
//     },
//     {
//     "x": 169,
//     "y": 164
//     },
//     {
//     "x": 34,
//     "y": 22
//     },
//     {
//     "x": 40,
//     "y": 132
//     },
//     {
//     "x": 32,
//     "y": 30
//     },
//     {
//     "x": 170,
//     "y": 185
//     },
//     {
//     "x": 102,
//     "y": 45
//     },
//     {
//     "x": 122,
//     "y": 126
//     },
//     {
//     "x": 181,
//     "y": 186
//     },
//     {
//     "x": 115,
//     "y": 41
//     },
//     {
//     "x": 173,
//     "y": 188
//     },
//     {
//     "x": 109,
//     "y": 164
//     },
//     {
//     "x": 35,
//     "y": 38
//     },
//     {
//     "x": 186,
//     "y": 27
//     },
//     {
//     "x": 24,
//     "y": 5
//     },
//     {
//     "x": 26,
//     "y": 160
//     },
//     {
//     "x": 33,
//     "y": 78
//     },
//     {
//     "x": 118,
//     "y": 70
//     },
//     {
//     "x": 122,
//     "y": 4
//     },
//     {
//     "x": 43,
//     "y": 73
//     },
//     {
//     "x": 157,
//     "y": 191
//     },
//     {
//     "x": 27,
//     "y": 4
//     },
//     {
//     "x": 153,
//     "y": 6
//     },
//     {
//     "x": 65,
//     "y": 11
//     },
//     {
//     "x": 179,
//     "y": 157
//     },
//     {
//     "x": 47,
//     "y": 160
//     },
//     {
//     "x": 150,
//     "y": 82
//     },
//     {
//     "x": 80,
//     "y": 195
//     },
//     {
//     "x": 23,
//     "y": 180
//     },
//     {
//     "x": 8,
//     "y": 41
//     },
//     {
//     "x": 197,
//     "y": 11
//     },
//     {
//     "x": 131,
//     "y": 111
//     },
//     {
//     "x": 16,
//     "y": 110
//     },
//     {
//     "x": 108,
//     "y": 81
//     },
//     {
//     "x": 34,
//     "y": 180
//     },
//     {
//     "x": 189,
//     "y": 1
//     },
//     {
//     "x": 67,
//     "y": 178
//     },
//     {
//     "x": 83,
//     "y": 26
//     },
//     {
//     "x": 163,
//     "y": 29
//     },
//     {
//     "x": 52,
//     "y": 180
//     },
//     {
//     "x": 60,
//     "y": 78
//     },
//     {
//     "x": 49,
//     "y": 114
//     },
//     {
//     "x": 50,
//     "y": 39
//     },
//     {
//     "x": 23,
//     "y": 32
//     },
//     {
//     "x": 172,
//     "y": 6
//     },
//     {
//     "x": 144,
//     "y": 149
//     },
//     {
//     "x": 10,
//     "y": 22
//     },
//     {
//     "x": 152,
//     "y": 123
//     },
//     {
//     "x": 84,
//     "y": 185
//     },
//     {
//     "x": 21,
//     "y": 176
//     },
//     {
//     "x": 44,
//     "y": 27
//     },
//     {
//     "x": 123,
//     "y": 198
//     },
//     {
//     "x": 79,
//     "y": 166
//     },
//     {
//     "x": 198,
//     "y": 96
//     },
//     {
//     "x": 118,
//     "y": 112
//     },
//     {
//     "x": 163,
//     "y": 163
//     },
//     {
//     "x": 92,
//     "y": 186
//     },
//     {
//     "x": 59,
//     "y": 54
//     },
//     {
//     "x": 84,
//     "y": 100
//     },
//     {
//     "x": 52,
//     "y": 171
//     },
//     {
//     "x": 19,
//     "y": 125
//     },
//     {
//     "x": 38,
//     "y": 72
//     },
//     {
//     "x": 193,
//     "y": 42
//     },
//     {
//     "x": 28,
//     "y": 27
//     },
//     {
//     "x": 146,
//     "y": 22
//     },
//     {
//     "x": 174,
//     "y": 126
//     },
//     {
//     "x": 118,
//     "y": 100
//     },
//     {
//     "x": 1,
//     "y": 50
//     },
//     {
//     "x": 126,
//     "y": 71
//     },
//     {
//     "x": 159,
//     "y": 31
//     },
//     {
//     "x": 147,
//     "y": 146
//     },
//     {
//     "x": 124,
//     "y": 120
//     },
//     {
//     "x": 177,
//     "y": 128
//     },
//     {
//     "x": 0,
//     "y": 49
//     },
//     {
//     "x": 198,
//     "y": 77
//     },
//     {
//     "x": 109,
//     "y": 63
//     },
//     {
//     "x": 23,
//     "y": 44
//     },
//     {
//     "x": 90,
//     "y": 159
//     },
//     {
//     "x": 18,
//     "y": 94
//     },
//     {
//     "x": 59,
//     "y": 182
//     },
//     {
//     "x": 40,
//     "y": 37
//     },
//     {
//     "x": 175,
//     "y": 32
//     },
//     {
//     "x": 67,
//     "y": 138
//     },
//     {
//     "x": 80,
//     "y": 9
//     },
//     {
//     "x": 39,
//     "y": 114
//     },
//     {
//     "x": 198,
//     "y": 85
//     },
//     {
//     "x": 144,
//     "y": 160
//     },
//     {
//     "x": 80,
//     "y": 177
//     },
//     {
//     "x": 93,
//     "y": 125
//     },
//     {
//     "x": 40,
//     "y": 17
//     },
//     {
//     "x": 18,
//     "y": 60
//     },
//     {
//     "x": 38,
//     "y": 82
//     },
//     {
//     "x": 5,
//     "y": 176
//     },
//     {
//     "x": 71,
//     "y": 91
//     },
//     {
//     "x": 175,
//     "y": 87
//     },
//     {
//     "x": 117,
//     "y": 46
//     },
//     {
//     "x": 109,
//     "y": 153
//     },
//     {
//     "x": 1,
//     "y": 69
//     },
//     {
//     "x": 59,
//     "y": 156
//     },
//     {
//     "x": 87,
//     "y": 118
//     },
//     {
//     "x": 7,
//     "y": 176
//     },
//     {
//     "x": 29,
//     "y": 39
//     },
//     {
//     "x": 154,
//     "y": 54
//     },
//     {
//     "x": 167,
//     "y": 166
//     },
//     {
//     "x": 144,
//     "y": 93
//     },
//     {
//     "x": 62,
//     "y": 132
//     },
//     {
//     "x": 96,
//     "y": 122
//     },
//     {
//     "x": 162,
//     "y": 63
//     },
//     {
//     "x": 6,
//     "y": 61
//     },
//     {
//     "x": 31,
//     "y": 173
//     },
//     {
//     "x": 20,
//     "y": 75
//     },
//     {
//     "x": 36,
//     "y": 154
//     },
//     {
//     "x": 126,
//     "y": 133
//     },
//     {
//     "x": 41,
//     "y": 184
//     },
//     {
//     "x": 188,
//     "y": 27
//     },
//     {
//     "x": 80,
//     "y": 62
//     },
//     {
//     "x": 181,
//     "y": 26
//     },
//     {
//     "x": 155,
//     "y": 22
//     },
//     {
//     "x": 119,
//     "y": 83
//     },
//     {
//     "x": 42,
//     "y": 196
//     },
//     {
//     "x": 127,
//     "y": 112
//     },
//     {
//     "x": 81,
//     "y": 116
//     },
//     {
//     "x": 167,
//     "y": 163
//     },
//     {
//     "x": 75,
//     "y": 143
//     },
//     {
//     "x": 96,
//     "y": 167
//     },
//     {
//     "x": 70,
//     "y": 17
//     },
//     {
//     "x": 105,
//     "y": 97
//     },
//     {
//     "x": 20,
//     "y": 40
//     },
//     {
//     "x": 102,
//     "y": 64
//     },
//     {
//     "x": 135,
//     "y": 138
//     },
//     {
//     "x": 173,
//     "y": 199
//     },
//     {
//     "x": 127,
//     "y": 109
//     },
//     {
//     "x": 29,
//     "y": 84
//     },
//     {
//     "x": 190,
//     "y": 98
//     },
//     {
//     "x": 197,
//     "y": 105
//     },
//     {
//     "x": 194,
//     "y": 7
//     },
//     {
//     "x": 96,
//     "y": 152
//     },
//     {
//     "x": 73,
//     "y": 89
//     },
//     {
//     "x": 102,
//     "y": 74
//     },
//     {
//     "x": 65,
//     "y": 69
//     },
//     {
//     "x": 111,
//     "y": 35
//     },
//     {
//     "x": 177,
//     "y": 11
//     },
//     {
//     "x": 48,
//     "y": 26
//     },
//     {
//     "x": 21,
//     "y": 78
//     },
//     {
//     "x": 83,
//     "y": 90
//     },
//     {
//     "x": 64,
//     "y": 158
//     },
//     {
//     "x": 98,
//     "y": 63
//     },
//     {
//     "x": 141,
//     "y": 105
//     },
//     {
//     "x": 163,
//     "y": 73
//     },
//     {
//     "x": 87,
//     "y": 94
//     },
//     {
//     "x": 129,
//     "y": 123
//     },
//     {
//     "x": 42,
//     "y": 170
//     },
//     {
//     "x": 10,
//     "y": 108
//     },
//     {
//     "x": 103,
//     "y": 38
//     },
//     {
//     "x": 21,
//     "y": 140
//     },
//     {
//     "x": 182,
//     "y": 173
//     },
//     {
//     "x": 121,
//     "y": 185
//     },
//     {
//     "x": 6,
//     "y": 83
//     },
//     {
//     "x": 132,
//     "y": 56
//     },
//     {
//     "x": 165,
//     "y": 147
//     },
//     {
//     "x": 87,
//     "y": 27
//     },
//     {
//     "x": 29,
//     "y": 1
//     },
//     {
//     "x": 44,
//     "y": 3
//     },
//     {
//     "x": 115,
//     "y": 106
//     },
//     {
//     "x": 132,
//     "y": 6
//     },
//     {
//     "x": 95,
//     "y": 181
//     },
//     {
//     "x": 178,
//     "y": 105
//     },
//     {
//     "x": 190,
//     "y": 127
//     },
//     {
//     "x": 71,
//     "y": 147
//     },
//     {
//     "x": 65,
//     "y": 9
//     },
//     {
//     "x": 60,
//     "y": 20
//     },
//     {
//     "x": 132,
//     "y": 1
//     },
//     {
//     "x": 24,
//     "y": 182
//     },
//     {
//     "x": 49,
//     "y": 44
//     },
//     {
//     "x": 61,
//     "y": 34
//     },
//     {
//     "x": 50,
//     "y": 51
//     },
//     {
//     "x": 124,
//     "y": 50
//     },
//     {
//     "x": 146,
//     "y": 0
//     },
//     {
//     "x": 148,
//     "y": 7
//     },
//     {
//     "x": 81,
//     "y": 93
//     },
//     {
//     "x": 72,
//     "y": 157
//     },
//     {
//     "x": 102,
//     "y": 193
//     },
//     {
//     "x": 174,
//     "y": 144
//     },
//     {
//     "x": 58,
//     "y": 115
//     },
//     {
//     "x": 130,
//     "y": 180
//     },
//     {
//     "x": 9,
//     "y": 130
//     },
//     {
//     "x": 129,
//     "y": 69
//     },
//     {
//     "x": 124,
//     "y": 14
//     },
//     {
//     "x": 97,
//     "y": 172
//     },
//     {
//     "x": 94,
//     "y": 129
//     },
//     {
//     "x": 98,
//     "y": 177
//     },
//     {
//     "x": 8,
//     "y": 113
//     }];
const actors = {};
var keys = [];
  //PARSING POS/////////////////////////////////
  // d3.json("nodesmap.json", function(err, d) {
  //   if(err) {
  //     throw err;
  //   } else {
  //     console.log(d);
  //     pos = d;
  //   }
    
  // });

  //PARSING ACTORS////////////////
  var i = 0;
  var count = 0;
    d3.csv("movies.csv", function(data) {
      //check csv 3 times to get all actors
      data.forEach(function(d) {
        if(d.title_year == 2011){

        if(actors[d.actor_1_name] != null) {
          actors[d.actor_1_name].movies += 1;
          actors[d.actor_1_name].costars[d.actor_3_name] = (actors[d.actor_1_name].costars[d.actor_3_name]) ? actors[d.actor_1_name].costars[d.actor_3_name]+1 : 1;
          actors[d.actor_1_name].costars[d.actor_2_name] = (actors[d.actor_1_name].costars[d.actor_2_name]) ? actors[d.actor_1_name].costars[d.actor_2_name]+1 : 1;
        } else {
          count++;
          actors[d.actor_1_name] = {
          name: d.actor_1_name,
          likes: d.actor_1_facebook_likes,
          movies: 1,
          costars: {},
          x: posX[i],
          y: posY[i]
        };
        actors[d.actor_1_name].costars[d.actor_3_name] = (actors[d.actor_1_name].costars[d.actor_3_name]) = 1;
        actors[d.actor_1_name].costars[d.actor_2_name] = (actors[d.actor_1_name].costars[d.actor_2_name]) = 1;
        actors[d.actor_1_name].id = i;
        keys[i] = d.actor_1_name;
        i++;
        }
        
        if(actors[d.actor_2_name]!= null) {
          actors[d.actor_2_name].movies += 1;
          actors[d.actor_2_name].costars[d.actor_3_name] = (actors[d.actor_2_name].costars[d.actor_3_name]) ? actors[d.actor_2_name].costars[d.actor_3_name]+1 : 1;
          actors[d.actor_2_name].costars[d.actor_1_name] = (actors[d.actor_2_name].costars[d.actor_1_name]) ? actors[d.actor_2_name].costars[d.actor_1_name]+1 : 1;
        } else {
          count++;
          actors[d.actor_2_name] = {
          name: d.actor_2_name,
          likes: d.actor_2_facebook_likes,
          movies: 1,
          x: posX[i],
          y: posY[i],
          costars: {}
        };
          actors[d.actor_2_name].costars[d.actor_3_name] = (actors[d.actor_2_name].costars[d.actor_3_name]) = 1;
          actors[d.actor_2_name].costars[d.actor_1_name] = (actors[d.actor_2_name].costars[d.actor_1_name]) = 1;
        actors[d.actor_2_name].id = i;
        keys[i] = d.actor_3_name;
        i++;
        }
        
        if(actors[d.actor_3_name] != null){
          actors[d.actor_3_name].movies += 1;
          actors[d.actor_3_name].costars[d.actor_2_name] = (actors[d.actor_3_name].costars[d.actor_2_name]) ? actors[d.actor_3_name].costars[d.actor_2_name]+1 : 1;
          actors[d.actor_3_name].costars[d.actor_1_name] = (actors[d.actor_3_name].costars[d.actor_1_name]) ? actors[d.actor_3_name].costars[d.actor_1_name]+1 : 1;
         } else { 
          count++;
          actors[d.actor_3_name] = {
          name: d.actor_3_name,
          likes: d.actor_3_facebook_likes,
          movies: 1,
          x: posX[i],
          y: posY[i],
          costars: {}
          };
          actors[d.actor_3_name].costars[d.actor_2_name] = (actors[d.actor_3_name].costars[d.actor_2_name]) = 1;
          actors[d.actor_3_name].costars[d.actor_1_name] = (actors[d.actor_3_name].costars[d.actor_1_name]) = 1;
         actors[d.actor_3_name].id = i;
         keys[i] = d.actor_3_name;
         i++;
         }
        } 
         
      });
      

    var s = 0;
    for (key in actors) {
        if (actors.hasOwnProperty(key)) {
       // keys[s] = key.name;
        s++;
         }//590
    }

      for(var k = 0; k < keys.length; k++) {
        circGen(actors[keys[k]]);
      }
      console.log(s);
      //console.log(actor);
    }); 


  ///CIRCLE GENERATOR/////////////////
  function circGen(actor) {
    var col = colByMov(actor.movies);
    console.log(actor.movies);
    var siz = sizeByLikes(actor.likes);
    var circ = svg.append("g")
      .attr("transform", "translate(" + actor.x + "," + actor.y + ")")
      .attr("class", "first")
      .call(drag)
      .append("circle").attr({
        r: siz,
      })
      .style("fill", col);
  }

  ///HELPER FUNCTIONS////////
  function sizeByLikes(likes) {
    var size = 3;
    if(likes == 0) {
      size = 5;
    }
    if(0 < likes <= 6000) {
      size = 6;
    }
    if(likes > 6000) { //can be bigger with this math
      size = likes/1000;
    }
    if(100000 < likes) {
      size = 100;
    }
    return size;
  }

  function colByMov(mov) {
    var col;
    if(mov <= 1) {
      col = "#db2872"; //purp
    }
    if(1 < mov <= 3) {
      col = "#b5c92d"; //green
    }
    if(3 < mov <= 7) {
      col = "#3e9ad6"; //blue
    }
    else {
      col = "#e45c1e"; //orange
    }
    return col;
  }


  //Drag nodes/////////////////////
var drag = d3.behavior.drag()
  .on("dragstart", function() {
    d3.event.sourceEvent.stopPropagation()
  })
  .on("drag", dragmove);

var line = svg.append("line")
  .style("stroke", "black")
  .attr("x1", 150)
  .attr("y1", 100)
  .attr("x2", 250)
  .attr("y2", 300);

//First node
// var g1 = svg.append("g")
// .attr("transform", "translate(" + 150 + "," + 100 + ")")
//   .attr("class", "first")
//   .call(drag)
//   .append("circle").attr({
//     r: 20,
//   })
//   .style("fill", "#F00")

//Second node
var g2 = svg.append("g")
  .attr("transform", "translate(" + 250 + "," + 300 + ")")
  .attr("class", "second")
  .call(drag)
  .append("circle").attr({
    r: 20,
  })
  .style("fill", "#00F");

//Drag handler
function dragmove(d) {
  var x = d3.event.x;
  var y = d3.event.y;
  d3.select(this).attr("transform", "translate(" + x + "," + y + ")");
  if(d3.select(this).attr("class") == "first") {
    line.attr("x1", x);
    line.attr("y1", y);
  } else {
    line.attr("x2", x);
    line.attr("y2", y);
  };
};



  // D3 to grab all the data needed from "movies.csv"
  // d3.csv('movies.csv', function(csv) {
  //     // Can use rollup function from P2 to total number of times
  //     // an actor's name shows up (this will give us total movies
  //     // they are in according to the dataset)
  //     for (var i=0; i<csv.length; ++i) {
		// 	csv[i].actor_1_name = csv[i].actor_1_name;
		// 	csv[i].actor_2_name = csv[i].actor_2_name;
  //     csv[i].actor_3_name = csv[i].actor_3_name;
  //     csv[i].movie_title = csv[i].movie_title;

  //     //only need facebook likes for 1 actor (I think) for circle/
  //     // diamter display
  //     csv[i].actor_1_facebook_likes = Number(csv[i].actor_1_facebook_likes);
  //     csv[i].gross = Number(csv[i].gross);
	 //    }



  //     console.log(csv); /*<--used to test that data was entered correctly
  //                           and that strings converted to integers */

  //     var width = 960, height = 900, colors = d3.scale.category10();

  //     var n = 1605, // number of nodes
  //         m = 1607, // number of links
  //         charge = -1000;

  //     var svg = d3.select("body").append("svg")
  //         .attr("width", width)
  //         .attr("height", height)
  //         .on("mousedown", create);

  //     create();

  //     function create () {
  //       svg.selectAll(".link, .node").remove();
  //       randomGraph(n, m, charge);
  //     }

  //     function randomGraph (n, m, charge) { //creates a random graph on n nodes and m links
  //       var nodes = d3.range(n).map(Object),
  //           list  = randomChoose(unorderedPairs(d3.range(n)), m),
  //           links = list.map(function (a) { return {source: a[0], target: a[1]} });

  //       var force = d3.layout.force()
  //           .size([width, height])
  //           .nodes(nodes)
  //           .links(links)
  //           .charge(charge)
  //           .on("tick", tick)
  //           .start();

  //       var svgLinks = svg.selectAll(".link").data(links)
  //         .enter().append("line")
  //           .attr("class", "link");

  //       var svgNodes = svg.selectAll(".node").data(nodes)
  //         .enter().append("circle")
  //           .attr("class", "node")
  //           .attr("r", 3)
  //           .style("fill", "white");

  //       svgNodes.transition().duration(800)
  //           .attr("r", function (d) { return 3 + 3 * d.weight })
  //           .style("fill", function (d) { return colors(d.weight) });

  //       svgLinks.transition().duration(300)
  //           .style("stroke-width", 3);

  //       function tick () {
  //         svgNodes
  //             .attr("cx", function(d) { return d.x })
  //             .attr("cy", function(d) { return d.y });

  //         svgLinks
  //             .attr("x1", function(d) { return d.source.x })
  //             .attr("y1", function(d) { return d.source.y })
  //             .attr("x2", function(d) { return d.target.x })
  //             .attr("y2", function(d) { return d.target.y });
  //       }
  //     }


  // //PARSING DATA////////////////
  // var actors = {};
  // var i = 0;
  //   d3.csv("movies.csv", function(data) {
  //     //check csv 3 times to get all actors
  //     data.forEach(function(d) {

  //       if(actors[d.actor_1_name]) {
  //         actors[d.actor_1_name].movies++;
  //         // if (actors[d.actor_1_name].costars[d.actor_3_name]){

  //         // }
  //         actors[d.actor_1_name].costars[d.actor_3_name] = (actors[d.actor_1_name].costars[d.actor_3_name]) ? actors[d.actor_1_name].costars[d.actor_3_name]+1 : 1;
  //         actors[d.actor_1_name].costars[d.actor_2_name] = (actors[d.actor_1_name].costars[d.actor_2_name]) ? actors[d.actor_1_name].costars[d.actor_2_name]+1 : 1;
  //       } else {
  //         actors[d.actor_1_name] = {
  //         name: d.actor_1_name,
  //         likes: d.actor_1_facebook_likes,
  //         movies: 1,
  //         costars: {}
  //       };
  //       actors[d.actor_1_name].costars[d.actor_3_name] = (actors[d.actor_1_name].costars[d.actor_3_name]) = 1;
  //       actors[d.actor_1_name].costars[d.actor_2_name] = (actors[d.actor_1_name].costars[d.actor_2_name]) = 1;
  //       }
  //       actors[d.actor_1_name].id = i;
  //       i++;


  //       if(actors[d.actor_2_name]) {
  //         actors[d.actor_2_name].movies++;
  //         actors[d.actor_2_name].costars[d.actor_3_name] = (actors[d.actor_2_name].costars[d.actor_3_name]) ? actors[d.actor_2_name].costars[d.actor_3_name]+1 : 1;
  //         actors[d.actor_2_name].costars[d.actor_1_name] = (actors[d.actor_2_name].costars[d.actor_1_name]) ? actors[d.actor_2_name].costars[d.actor_1_name]+1 : 1;
  //       } else {
  //         actors[d.actor_2_name] = {
  //         name: d.actor_2_name,
  //         likes: d.actor_2_facebook_likes,
  //         movies: 1,
  //         costars: {}
  //       };
  //         actors[d.actor_2_name].costars[d.actor_3_name] = (actors[d.actor_2_name].costars[d.actor_3_name]) = 1;
  //         actors[d.actor_2_name].costars[d.actor_1_name] = (actors[d.actor_2_name].costars[d.actor_1_name]) = 1;
  //       }
  //       actors[d.actor_2_name].id = i;
  //       i++;



  //       if(actors[d.actor_3_name]){
  //         actors[d.actor_3_name].costars[d.actor_2_name] = (actors[d.actor_3_name].costars[d.actor_2_name]) ? actors[d.actor_3_name].costars[d.actor_2_name]+1 : 1;
  //         actors[d.actor_3_name].costars[d.actor_1_name] = (actors[d.actor_3_name].costars[d.actor_1_name]) ? actors[d.actor_3_name].costars[d.actor_1_name]+1 : 1;
  //        } else { //make a new var
  //         actors[d.actor_3_name] = {
  //         name: d.actor_3_name,
  //         likes: d.actor_3_facebook_likes,
  //         movies: 1,
  //         costars: {}
  //         };
  //         actors[d.actor_3_name].costars[d.actor_2_name] = (actors[d.actor_3_name].costars[d.actor_2_name]) = 1;
  //         actors[d.actor_3_name].costars[d.actor_1_name] = (actors[d.actor_3_name].costars[d.actor_1_name]) = 1;
  //        }
  //        actors[d.actor_3_name].id = i;
  //       i++;
     
  //     });
  //       console.log(actors);
  //   }); 

    

      // function randomChoose (s, k) { // returns a random k element subset of s
      //   var a = [], i = -1, j;
      //   while (++i < k) {
      //     j = Math.floor(Math.random() * s.length);
      //     a.push(s.splice(j, 1)[0]);
      //   };
      //   return a;
      // }

      // function unorderedPairs (s) { // returns the list of all unordered pairs from s
      //   var i = -1, a = [], j;
      //   while (++i < s.length) {
      //     j = i;
      //     while (++j < s.length) a.push([s[i],s[j]])
      //   };
      //   return a;
      // }
      //  });



  </script>
  <script type="text/javascript" src="main.js"></script>
  </body>
</html>
